<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>VectorExt.cs</title>
  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.5.1.min.js"></script>
</head>
<body>
<pre><code class = "cs">
<a name="ln1">ï»¿using System.Numerics;</a>
<a name="ln2"> </a>
<a name="ln3">namespace Foster.Framework;</a>
<a name="ln4"> </a>
<a name="ln5">/// &lt;summary&gt;</a>
<a name="ln6">/// &lt;see cref=&quot;Vector2&quot;/&gt;, &lt;see cref=&quot;Vector3&quot;/&gt;, &lt;see cref=&quot;Vector4&quot;/&gt; Extension Methods</a>
<a name="ln7">/// &lt;/summary&gt;</a>
<a name="ln8">public static class VectorExt</a>
<a name="ln9">{</a>
<a name="ln10">	/// &lt;summary&gt;</a>
<a name="ln11">	/// Clamps the vector inside the provided range.</a>
<a name="ln12">	/// &lt;/summary&gt;</a>
<a name="ln13">	public static Vector2 Clamp(this Vector2 vector, in Vector2 min, in Vector2 max)</a>
<a name="ln14">		=&gt; new(Calc.Clamp(vector.X, min.X, max.X), Calc.Clamp(vector.Y, min.Y, max.Y));</a>
<a name="ln15"> </a>
<a name="ln16">	/// &lt;summary&gt;</a>
<a name="ln17">	/// Clamps the vector inside the bounding rectangle.</a>
<a name="ln18">	/// &lt;/summary&gt;</a>
<a name="ln19">	public static Vector2 Clamp(this Vector2 vector, in Rect bounds)</a>
<a name="ln20">		=&gt; vector.Clamp(bounds.TopLeft, bounds.BottomRight);</a>
<a name="ln21"> </a>
<a name="ln22">	/// &lt;summary&gt;</a>
<a name="ln23">	/// Floors the individual components of a Vector2</a>
<a name="ln24">	/// &lt;/summary&gt;</a>
<a name="ln25">	public static Vector2 Floor(this Vector2 vector)</a>
<a name="ln26">		=&gt; new (MathF.Floor(vector.X), MathF.Floor(vector.Y));</a>
<a name="ln27"> </a>
<a name="ln28">	/// &lt;summary&gt;</a>
<a name="ln29">	/// Floors the individual components of a Vector3</a>
<a name="ln30">	/// &lt;/summary&gt;</a>
<a name="ln31">	public static Vector3 Floor(this Vector3 vector)</a>
<a name="ln32">		=&gt; new(MathF.Floor(vector.X), MathF.Floor(vector.Y), MathF.Floor(vector.Z));</a>
<a name="ln33"> </a>
<a name="ln34">	/// &lt;summary&gt;</a>
<a name="ln35">	/// Floors the individual components of a Vector4</a>
<a name="ln36">	/// &lt;/summary&gt;</a>
<a name="ln37">	public static Vector4 Floor(this Vector4 vector)</a>
<a name="ln38">		=&gt; new(MathF.Floor(vector.X), MathF.Floor(vector.Y), MathF.Floor(vector.Z), MathF.Floor(vector.W));</a>
<a name="ln39"> </a>
<a name="ln40">	/// &lt;summary&gt;</a>
<a name="ln41">	/// Rounds the individual components of a Vector2</a>
<a name="ln42">	/// &lt;/summary&gt;</a>
<a name="ln43">	public static Vector2 Round(this Vector2 vector)</a>
<a name="ln44">		=&gt; new(MathF.Round(vector.X), MathF.Round(vector.Y));</a>
<a name="ln45"> </a>
<a name="ln46">	/// &lt;summary&gt;</a>
<a name="ln47">	/// Rounds the individual components of a Vector2</a>
<a name="ln48">	/// &lt;/summary&gt;</a>
<a name="ln49">	public static Point2 RoundToPoint2(this Vector2 vector)</a>
<a name="ln50">		=&gt; new((int)MathF.Round(vector.X), (int)MathF.Round(vector.Y));</a>
<a name="ln51"> </a>
<a name="ln52">	/// &lt;summary&gt;</a>
<a name="ln53">	/// Floors the individual components of a Vector2</a>
<a name="ln54">	/// &lt;/summary&gt;</a>
<a name="ln55">	public static Point2 FloorToPoint2(this Vector2 vector)</a>
<a name="ln56">		=&gt; new((int)MathF.Floor(vector.X), (int)MathF.Floor(vector.Y));</a>
<a name="ln57"> </a>
<a name="ln58">	/// &lt;summary&gt;</a>
<a name="ln59">	/// Ceilings the individual components of a Vector2</a>
<a name="ln60">	/// &lt;/summary&gt;</a>
<a name="ln61">	public static Point2 CeilingToPoint2(this Vector2 vector)</a>
<a name="ln62">		=&gt; new((int)MathF.Ceiling(vector.X), (int)MathF.Ceiling(vector.Y));</a>
<a name="ln63"> </a>
<a name="ln64">	/// &lt;summary&gt;</a>
<a name="ln65">	/// Rounds the individual components of a Vector3</a>
<a name="ln66">	/// &lt;/summary&gt;</a>
<a name="ln67">	public static Vector3 Round(this Vector3 vector)</a>
<a name="ln68">		=&gt; new(MathF.Round(vector.X), MathF.Round(vector.Y), MathF.Round(vector.Z));</a>
<a name="ln69"> </a>
<a name="ln70">	/// &lt;summary&gt;</a>
<a name="ln71">	/// Rounds the individual components of a Vector4</a>
<a name="ln72">	/// &lt;/summary&gt;</a>
<a name="ln73">	public static Vector4 Round(this Vector4 vector)</a>
<a name="ln74">		=&gt; new(MathF.Round(vector.X), MathF.Round(vector.Y), MathF.Round(vector.Z), MathF.Round(vector.W));</a>
<a name="ln75"> </a>
<a name="ln76">	/// &lt;summary&gt;</a>
<a name="ln77">	/// Ceilings the individual components of a Vector2</a>
<a name="ln78">	/// &lt;/summary&gt;</a>
<a name="ln79">	public static Vector2 Ceiling(this Vector2 vector)</a>
<a name="ln80">		=&gt; new(MathF.Ceiling(vector.X), MathF.Ceiling(vector.Y));</a>
<a name="ln81"> </a>
<a name="ln82">	/// &lt;summary&gt;</a>
<a name="ln83">	/// Ceilings the individual components of a Vector3</a>
<a name="ln84">	/// &lt;/summary&gt;</a>
<a name="ln85">	public static Vector3 Ceiling(this Vector3 vector)</a>
<a name="ln86">		=&gt; new(MathF.Ceiling(vector.X), MathF.Ceiling(vector.Y), MathF.Ceiling(vector.Z));</a>
<a name="ln87"> </a>
<a name="ln88">	/// &lt;summary&gt;</a>
<a name="ln89">	/// Ceilings the individual components of a Vector4</a>
<a name="ln90">	/// &lt;/summary&gt;</a>
<a name="ln91">	public static Vector4 Ceiling(this Vector4 vector)</a>
<a name="ln92">		=&gt; new(MathF.Ceiling(vector.X), MathF.Ceiling(vector.Y), MathF.Ceiling(vector.Z), MathF.Ceiling(vector.W));</a>
<a name="ln93"> </a>
<a name="ln94">	/// &lt;summary&gt;</a>
<a name="ln95">	/// Turns a Vector2 to its right perpendicular</a>
<a name="ln96">	/// &lt;/summary&gt;</a>
<a name="ln97">	public static Vector2 TurnRight(this Vector2 vector) =&gt; new(-vector.Y, vector.X);</a>
<a name="ln98"> </a>
<a name="ln99">	/// &lt;summary&gt;</a>
<a name="ln100">	/// Turns a Vector2 to its left perpendicular</a>
<a name="ln101">	/// &lt;/summary&gt;</a>
<a name="ln102">	public static Vector2 TurnLeft(this Vector2 vector) =&gt; new(vector.Y, -vector.X);</a>
<a name="ln103"> </a>
<a name="ln104">	/// &lt;summary&gt;</a>
<a name="ln105">	/// Gets the Angle of a Vector in radians</a>
<a name="ln106">	/// &lt;/summary&gt;</a>
<a name="ln107">	public static float Angle(this Vector2 vector) =&gt; MathF.Atan2(vector.Y, vector.X);</a>
<a name="ln108"> </a>
<a name="ln109">	/// &lt;summary&gt;</a>
<a name="ln110">	/// Normalizes a Vector2 safely (a zero-length Vector2 returns 0)</a>
<a name="ln111">	/// &lt;/summary&gt;</a>
<a name="ln112">	public static Vector2 Normalized(this Vector2 vector)</a>
<a name="ln113">	{</a>
<a name="ln114">		if (vector.X == 0 &amp;&amp; vector.Y == 0)</a>
<a name="ln115">			return Vector2.Zero;</a>
<a name="ln116">		return Vector2.Normalize(vector);</a>
<a name="ln117">	}</a>
<a name="ln118"> </a>
<a name="ln119">	/// &lt;summary&gt;</a>
<a name="ln120">	/// Normalizes a Vector3 safely (a zero-length Vector3 returns 0)</a>
<a name="ln121">	/// &lt;/summary&gt;</a>
<a name="ln122">	public static Vector3 Normalized(this Vector3 vector)</a>
<a name="ln123">	{</a>
<a name="ln124">		if (vector.X == 0 &amp;&amp; vector.Y == 0 &amp;&amp; vector.Z == 0)</a>
<a name="ln125">			return Vector3.Zero;</a>
<a name="ln126">		return Vector3.Normalize(vector);</a>
<a name="ln127">	}</a>
<a name="ln128"> </a>
<a name="ln129">	/// &lt;summary&gt;</a>
<a name="ln130">	/// Normalizes a Vector2 and snaps it to the closest of the 4 cardinal directions (a zero-length Vector2 returns 0)</a>
<a name="ln131">	/// &lt;/summary&gt;</a>
<a name="ln132">	public static Vector2 FourWayNormal(this Vector2 vector)</a>
<a name="ln133">	{</a>
<a name="ln134">		if (vector == Vector2.Zero)</a>
<a name="ln135">			return vector;</a>
<a name="ln136"> </a>
<a name="ln137">		vector = Calc.AngleToVector(Calc.Snap(vector.Angle(), Calc.HalfPI));</a>
<a name="ln138">		if (MathF.Abs(vector.X) &lt; .1f)</a>
<a name="ln139">		{</a>
<a name="ln140">			vector.X = 0;</a>
<a name="ln141">			vector.Y = MathF.Sign(vector.Y);</a>
<a name="ln142">		}</a>
<a name="ln143">		else if (MathF.Abs(vector.Y) &lt; .1f)</a>
<a name="ln144">		{</a>
<a name="ln145">			vector.X = MathF.Sign(vector.X);</a>
<a name="ln146">			vector.Y = 0;</a>
<a name="ln147">		}</a>
<a name="ln148"> </a>
<a name="ln149">		return vector;</a>
<a name="ln150">	}</a>
<a name="ln151"> </a>
<a name="ln152">	/// &lt;summary&gt;</a>
<a name="ln153">	/// Normalizes a Vector2 and snaps it to the closest of the 8 cardinal or diagonal directions (a zero-length Vector2 returns 0)</a>
<a name="ln154">	/// &lt;/summary&gt;</a>
<a name="ln155">	public static Vector2 EightWayNormal(this Vector2 vector)</a>
<a name="ln156">	{</a>
<a name="ln157">		if (vector == Vector2.Zero)</a>
<a name="ln158">			return vector;</a>
<a name="ln159"> </a>
<a name="ln160">		vector = Calc.AngleToVector(Calc.Snap(vector.Angle(), Calc.PI / 4));</a>
<a name="ln161">		if (MathF.Abs(vector.X) &lt; .1f)</a>
<a name="ln162">		{</a>
<a name="ln163">			vector.X = 0;</a>
<a name="ln164">			vector.Y = MathF.Sign(vector.Y);</a>
<a name="ln165">		}</a>
<a name="ln166">		else if (MathF.Abs(vector.Y) &lt; .1f)</a>
<a name="ln167">		{</a>
<a name="ln168">			vector.X = MathF.Sign(vector.X);</a>
<a name="ln169">			vector.Y = 0;</a>
<a name="ln170">		}</a>
<a name="ln171"> </a>
<a name="ln172">		return vector;</a>
<a name="ln173">	}</a>
<a name="ln174"> </a>
<a name="ln175">	/// &lt;summary&gt;</a>
<a name="ln176">	/// Returns a Vector2 with the X-value of this Vector2, but zero Y</a>
<a name="ln177">	/// &lt;/summary&gt;</a>
<a name="ln178">	public static Vector2 ZeroY(this Vector2 vector) =&gt; new(vector.X, 0);</a>
<a name="ln179"> </a>
<a name="ln180">	/// &lt;summary&gt;</a>
<a name="ln181">	/// Returns a Vector2 with the Y-value of this Vector2, but zero X</a>
<a name="ln182">	/// &lt;/summary&gt;</a>
<a name="ln183">	public static Vector2 ZeroX(this Vector2 vector) =&gt; new(0, vector.Y);</a>
<a name="ln184"> </a>
<a name="ln185">	/// &lt;summary&gt;</a>
<a name="ln186">	/// Returns a Vector2 with the Abs of both our components</a>
<a name="ln187">	/// &lt;/summary&gt;</a>
<a name="ln188">	public static Vector2 Abs(this Vector2 vector)</a>
<a name="ln189">		=&gt; new(MathF.Abs(vector.X), MathF.Abs(vector.Y));</a>
<a name="ln190">}</a>
</code></pre>
<div class="balloon" rel="114"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v3024/" target="_blank">V3024</a> An odd precise comparison: vector.X == 0. Consider using a comparison with defined precision: Math.Abs(A - B) &lt; Epsilon.</p></div>
<div class="balloon" rel="114"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v3024/" target="_blank">V3024</a> An odd precise comparison: vector.Y == 0. Consider using a comparison with defined precision: Math.Abs(A - B) &lt; Epsilon.</p></div>
<div class="balloon" rel="124"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v3024/" target="_blank">V3024</a> An odd precise comparison: vector.X == 0. Consider using a comparison with defined precision: Math.Abs(A - B) &lt; Epsilon.</p></div>
<div class="balloon" rel="124"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v3024/" target="_blank">V3024</a> An odd precise comparison: vector.Y == 0. Consider using a comparison with defined precision: Math.Abs(A - B) &lt; Epsilon.</p></div>
<div class="balloon" rel="124"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v3024/" target="_blank">V3024</a> An odd precise comparison: vector.Z == 0. Consider using a comparison with defined precision: Math.Abs(A - B) &lt; Epsilon.</p></div>
<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>XmlAttributeDeserializerTests.cs</title>
  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.5.1.min.js"></script>
</head>
<body>
<pre><code class = "cs">
<a name="ln1">ï»¿using System.Globalization;</a>
<a name="ln2">using System.Xml.Linq;</a>
<a name="ln3">using RestSharp.Serializers.Xml;</a>
<a name="ln4">using RestSharp.Tests.Serializers.Xml.SampleClasses;</a>
<a name="ln5"> </a>
<a name="ln6">namespace RestSharp.Tests.Serializers.Xml;</a>
<a name="ln7"> </a>
<a name="ln8">public class XmlAttributeDeserializerTests {</a>
<a name="ln9">    const string GuidString = &quot;AC1FC4BC-087A-4242-B8EE-C53EBE9887A5&quot;;</a>
<a name="ln10"> </a>
<a name="ln11">#if NET</a>
<a name="ln12">    readonly string _sampleDataPath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, &quot;SampleData&quot;);</a>
<a name="ln13">#else</a>
<a name="ln14">    readonly string _sampleDataPath = Path.Combine(Directory.GetCurrentDirectory(), &quot;SampleData&quot;);</a>
<a name="ln15">#endif</a>
<a name="ln16"> </a>
<a name="ln17">    string PathFor(string sampleFile) =&gt; Path.Combine(_sampleDataPath, sampleFile);</a>
<a name="ln18"> </a>
<a name="ln19">    [Fact]</a>
<a name="ln20">    public void Can_Deserialize_Lists_of_Simple_Types() {</a>
<a name="ln21">        var xmlPath = PathFor(&quot;xmllists.xml&quot;);</a>
<a name="ln22">        var doc     = XDocument.Load(xmlPath);</a>
<a name="ln23">        var xml     = new XmlAttributeDeserializer();</a>
<a name="ln24"> </a>
<a name="ln25">        var output = xml.Deserialize&lt;SimpleTypesListSample&gt;(</a>
<a name="ln26">            new RestResponse { Content = doc.ToString() }</a>
<a name="ln27">        )!;</a>
<a name="ln28"> </a>
<a name="ln29">        Assert.NotEmpty(output.Numbers);</a>
<a name="ln30">        Assert.False(output.Names[0].Length == 0);</a>
<a name="ln31">        Assert.False(output.Numbers.Sum() == 0);</a>
<a name="ln32">    }</a>
<a name="ln33"> </a>
<a name="ln34">    [Fact]</a>
<a name="ln35">    public void Can_Deserialize_To_List_Inheritor_From_Custom_Root_With_Attributes() {</a>
<a name="ln36">        var xmlPath = PathFor(&quot;ListWithAttributes.xml&quot;);</a>
<a name="ln37">        var doc     = XDocument.Load(xmlPath);</a>
<a name="ln38">        var xml     = new XmlAttributeDeserializer { RootElement = &quot;Calls&quot; };</a>
<a name="ln39">        var output  = xml.Deserialize&lt;TwilioCallList&gt;(new RestResponse { Content = doc.ToString() })!;</a>
<a name="ln40"> </a>
<a name="ln41">        Assert.Equal(3, output.NumPages);</a>
<a name="ln42">        Assert.Equal(2, output.Count);</a>
<a name="ln43">    }</a>
<a name="ln44"> </a>
<a name="ln45">    [Fact]</a>
<a name="ln46">    public void Can_Deserialize_To_Standalone_List_Without_Matching_Class_Case() {</a>
<a name="ln47">        var xmlPath = PathFor(&quot;InlineListSample.xml&quot;);</a>
<a name="ln48">        var doc     = XDocument.Load(xmlPath);</a>
<a name="ln49">        var xml     = new XmlAttributeDeserializer();</a>
<a name="ln50">        var output  = xml.Deserialize&lt;List&lt;Image&gt;&gt;(new RestResponse { Content = doc.ToString() })!;</a>
<a name="ln51"> </a>
<a name="ln52">        Assert.Equal(4, output.Count);</a>
<a name="ln53">    }</a>
<a name="ln54"> </a>
<a name="ln55">    [Fact]</a>
<a name="ln56">    public void Can_Deserialize_To_Standalone_List_With_Matching_Class_Case() {</a>
<a name="ln57">        var xmlPath = PathFor(&quot;InlineListSample.xml&quot;);</a>
<a name="ln58">        var doc     = XDocument.Load(xmlPath);</a>
<a name="ln59">        var xml     = new XmlAttributeDeserializer();</a>
<a name="ln60">        var output  = xml.Deserialize&lt;List&lt;image&gt;&gt;(new RestResponse { Content = doc.ToString() })!;</a>
<a name="ln61"> </a>
<a name="ln62">        Assert.Equal(4, output.Count);</a>
<a name="ln63">    }</a>
<a name="ln64"> </a>
<a name="ln65">    [Fact]</a>
<a name="ln66">    public void Can_Deserialize_Directly_To_Lists_Off_Root_Element() {</a>
<a name="ln67">        var xmlPath = PathFor(&quot;directlists.xml&quot;);</a>
<a name="ln68">        var doc     = XDocument.Load(xmlPath);</a>
<a name="ln69">        var xml     = new XmlAttributeDeserializer();</a>
<a name="ln70">        var output  = xml.Deserialize&lt;List&lt;Database&gt;&gt;(new RestResponse { Content = doc.ToString() })!;</a>
<a name="ln71"> </a>
<a name="ln72">        Assert.Equal(2, output.Count);</a>
<a name="ln73">    }</a>
<a name="ln74"> </a>
<a name="ln75">    [Fact]</a>
<a name="ln76">    public void Can_Deserialize_Parentless_aka_Inline_List_Items_Without_Matching_Class_Name() {</a>
<a name="ln77">        var xmlPath = PathFor(&quot;InlineListSample.xml&quot;);</a>
<a name="ln78">        var doc     = XDocument.Load(xmlPath);</a>
<a name="ln79">        var xml     = new XmlAttributeDeserializer();</a>
<a name="ln80">        var output  = xml.Deserialize&lt;InlineListSample&gt;(new RestResponse { Content = doc.ToString() })!;</a>
<a name="ln81"> </a>
<a name="ln82">        Assert.Equal(4, output.Images.Count);</a>
<a name="ln83">    }</a>
<a name="ln84"> </a>
<a name="ln85">    [Fact]</a>
<a name="ln86">    public void Can_Deserialize_Parentless_aka_Inline_List_Items_With_Matching_Class_Name() {</a>
<a name="ln87">        var xmlpath = PathFor(&quot;InlineListSample.xml&quot;);</a>
<a name="ln88">        var doc     = XDocument.Load(xmlpath);</a>
<a name="ln89">        var xml     = new XmlAttributeDeserializer();</a>
<a name="ln90">        var output  = xml.Deserialize&lt;InlineListSample&gt;(new RestResponse { Content = doc.ToString() })!;</a>
<a name="ln91"> </a>
<a name="ln92">        Assert.Equal(4, output.images.Count);</a>
<a name="ln93">    }</a>
<a name="ln94"> </a>
<a name="ln95">    [Fact]</a>
<a name="ln96">    public void Can_Deserialize_Parentless_aka_Inline_List_Items_With_Matching_Class_Name_With_Additional_Property() {</a>
<a name="ln97">        var xmlpath = PathFor(&quot;InlineListSample.xml&quot;);</a>
<a name="ln98">        var doc     = XDocument.Load(xmlpath);</a>
<a name="ln99">        var xml     = new XmlAttributeDeserializer();</a>
<a name="ln100">        var output  = xml.Deserialize&lt;InlineListSample&gt;(new RestResponse { Content = doc.ToString() })!;</a>
<a name="ln101"> </a>
<a name="ln102">        Assert.Equal(4, output.Count);</a>
<a name="ln103">    }</a>
<a name="ln104"> </a>
<a name="ln105">    [Fact]</a>
<a name="ln106">    public void Can_Deserialize_Nested_List_Items_Without_Matching_Class_Name() {</a>
<a name="ln107">        var xmlpath = PathFor(&quot;NestedListSample.xml&quot;);</a>
<a name="ln108">        var doc     = XDocument.Load(xmlpath);</a>
<a name="ln109">        var xml     = new XmlAttributeDeserializer();</a>
<a name="ln110">        var output  = xml.Deserialize&lt;InlineListSample&gt;(new RestResponse { Content = doc.ToString() })!;</a>
<a name="ln111"> </a>
<a name="ln112">        Assert.Equal(4, output.Images.Count);</a>
<a name="ln113">    }</a>
<a name="ln114"> </a>
<a name="ln115">    [Fact]</a>
<a name="ln116">    public void Can_Deserialize_Nested_List_Items_With_Matching_Class_Name() {</a>
<a name="ln117">        var xmlpath = PathFor(&quot;NestedListSample.xml&quot;);</a>
<a name="ln118">        var doc     = XDocument.Load(xmlpath);</a>
<a name="ln119">        var xml     = new XmlAttributeDeserializer();</a>
<a name="ln120">        var output  = xml.Deserialize&lt;InlineListSample&gt;(new RestResponse { Content = doc.ToString() })!;</a>
<a name="ln121"> </a>
<a name="ln122">        Assert.Equal(4, output.images.Count);</a>
<a name="ln123">    }</a>
<a name="ln124"> </a>
<a name="ln125">    [Fact]</a>
<a name="ln126">    public void Can_Deserialize_Nested_List_Without_Elements_To_Empty_List() {</a>
<a name="ln127">        var doc    = CreateXmlWithEmptyNestedList();</a>
<a name="ln128">        var xml    = new XmlAttributeDeserializer();</a>
<a name="ln129">        var output = xml.Deserialize&lt;EmptyListSample&gt;(new RestResponse { Content = doc })!;</a>
<a name="ln130"> </a>
<a name="ln131">        Assert.NotNull(output.Images);</a>
<a name="ln132">        Assert.Empty(output.Images);</a>
<a name="ln133">    }</a>
<a name="ln134"> </a>
<a name="ln135">    [Fact]</a>
<a name="ln136">    public void Can_Deserialize_Inline_List_Without_Elements_To_Empty_List() {</a>
<a name="ln137">        var doc    = CreateXmlWithEmptyInlineList();</a>
<a name="ln138">        var xml    = new XmlAttributeDeserializer();</a>
<a name="ln139">        var output = xml.Deserialize&lt;EmptyListSample&gt;(new RestResponse { Content = doc })!;</a>
<a name="ln140"> </a>
<a name="ln141">        Assert.NotNull(output.Images);</a>
<a name="ln142">        Assert.Empty(output.Images);</a>
<a name="ln143">    }</a>
<a name="ln144"> </a>
<a name="ln145">    [Fact]</a>
<a name="ln146">    public void Can_Deserialize_Empty_Elements_to_Nullable_Values() {</a>
<a name="ln147">        var doc    = CreateXmlWithNullValues();</a>
<a name="ln148">        var xml    = new XmlAttributeDeserializer();</a>
<a name="ln149">        var output = xml.Deserialize&lt;NullableValues&gt;(new RestResponse { Content = doc })!;</a>
<a name="ln150"> </a>
<a name="ln151">        Assert.Null(output.Id);</a>
<a name="ln152">        Assert.Null(output.StartDate);</a>
<a name="ln153">        Assert.Null(output.UniqueId);</a>
<a name="ln154">    }</a>
<a name="ln155"> </a>
<a name="ln156">    [Fact]</a>
<a name="ln157">    public void Can_Deserialize_Elements_to_Nullable_Values() {</a>
<a name="ln158">        var culture = CultureInfo.InvariantCulture;</a>
<a name="ln159">        var doc     = CreateXmlWithoutEmptyValues(culture);</a>
<a name="ln160"> </a>
<a name="ln161">        var xml    = new XmlAttributeDeserializer { Culture = culture };</a>
<a name="ln162">        var output = xml.Deserialize&lt;NullableValues&gt;(new RestResponse { Content = doc })!;</a>
<a name="ln163"> </a>
<a name="ln164">        Assert.NotNull(output.Id);</a>
<a name="ln165">        Assert.NotNull(output.StartDate);</a>
<a name="ln166">        Assert.NotNull(output.UniqueId);</a>
<a name="ln167">        Assert.Equal(123, output.Id);</a>
<a name="ln168">        Assert.Equal(new DateTime(2010, 2, 21, 9, 35, 00), output.StartDate);</a>
<a name="ln169">        Assert.Equal(new Guid(GuidString), output.UniqueId);</a>
<a name="ln170">    }</a>
<a name="ln171"> </a>
<a name="ln172">    [Fact]</a>
<a name="ln173">    public void Can_Deserialize_TimeSpan() {</a>
<a name="ln174">        var culture = CultureInfo.InvariantCulture;</a>
<a name="ln175">        var doc     = new XDocument(culture);</a>
<a name="ln176"> </a>
<a name="ln177">        TimeSpan? nullTimespan      = null;</a>
<a name="ln178">        TimeSpan? nullValueTimeSpan = new TimeSpan(21, 30, 7);</a>
<a name="ln179"> </a>
<a name="ln180">        var root = new XElement(&quot;Person&quot;);</a>
<a name="ln181"> </a>
<a name="ln182">        root.Add(new XElement(&quot;Tick&quot;, new TimeSpan(468006)));</a>
<a name="ln183">        root.Add(new XElement(&quot;Millisecond&quot;, new TimeSpan(0, 0, 0, 0, 125)));</a>
<a name="ln184">        root.Add(new XElement(&quot;Second&quot;, new TimeSpan(0, 0, 8)));</a>
<a name="ln185">        root.Add(new XElement(&quot;Minute&quot;, new TimeSpan(0, 55, 2)));</a>
<a name="ln186">        root.Add(new XElement(&quot;Hour&quot;, new TimeSpan(21, 30, 7)));</a>
<a name="ln187">        root.Add(new XElement(&quot;NullableWithoutValue&quot;, nullTimespan));</a>
<a name="ln188">        root.Add(new XElement(&quot;NullableWithValue&quot;, nullValueTimeSpan));</a>
<a name="ln189"> </a>
<a name="ln190">        doc.Add(root);</a>
<a name="ln191"> </a>
<a name="ln192">        var response = new RestResponse { Content             = doc.ToString() };</a>
<a name="ln193">        var d        = new XmlAttributeDeserializer { Culture = culture };</a>
<a name="ln194">        var payload  = d.Deserialize&lt;TimeSpanTestStructure&gt;(response)!;</a>
<a name="ln195"> </a>
<a name="ln196">        Assert.Equal(new TimeSpan(468006), payload.Tick);</a>
<a name="ln197">        Assert.Equal(new TimeSpan(0, 0, 0, 0, 125), payload.Millisecond);</a>
<a name="ln198">        Assert.Equal(new TimeSpan(0, 0, 8), payload.Second);</a>
<a name="ln199">        Assert.Equal(new TimeSpan(0, 55, 2), payload.Minute);</a>
<a name="ln200">        Assert.Equal(new TimeSpan(21, 30, 7), payload.Hour);</a>
<a name="ln201">        Assert.Null(payload.NullableWithoutValue);</a>
<a name="ln202">        Assert.NotNull(payload.NullableWithValue);</a>
<a name="ln203">        Assert.Equal(new TimeSpan(21, 30, 7), payload.NullableWithValue.Value);</a>
<a name="ln204">    }</a>
<a name="ln205"> </a>
<a name="ln206">    [Fact]</a>
<a name="ln207">    public void Can_Deserialize_Custom_Formatted_Date() {</a>
<a name="ln208">        const string format = &quot;dd yyyy MMM, hh:mm ss tt zzz&quot;;</a>
<a name="ln209"> </a>
<a name="ln210">        var culture = CultureInfo.InvariantCulture;</a>
<a name="ln211">        var date    = new DateTime(2010, 2, 8, 11, 11, 11);</a>
<a name="ln212">        var doc     = new XDocument();</a>
<a name="ln213">        var root    = new XElement(&quot;Person&quot;);</a>
<a name="ln214"> </a>
<a name="ln215">        root.Add(new XElement(&quot;StartDate&quot;, date.ToString(format, culture)));</a>
<a name="ln216"> </a>
<a name="ln217">        doc.Add(root);</a>
<a name="ln218"> </a>
<a name="ln219">        var xml = new XmlAttributeDeserializer {</a>
<a name="ln220">            DateFormat = format,</a>
<a name="ln221">            Culture    = culture</a>
<a name="ln222">        };</a>
<a name="ln223">        var response = new RestResponse { Content = doc.ToString() };</a>
<a name="ln224">        var output   = xml.Deserialize&lt;PersonForXml&gt;(response)!;</a>
<a name="ln225"> </a>
<a name="ln226">        Assert.Equal(date, output.StartDate);</a>
<a name="ln227">    }</a>
<a name="ln228"> </a>
<a name="ln229">    [Fact]</a>
<a name="ln230">    public void Can_Deserialize_Nested_Class() {</a>
<a name="ln231">        var doc      = CreateElementsXml();</a>
<a name="ln232">        var response = new RestResponse { Content = doc };</a>
<a name="ln233">        var d        = new XmlAttributeDeserializer();</a>
<a name="ln234">        var p        = d.Deserialize&lt;PersonForXml&gt;(response);</a>
<a name="ln235"> </a>
<a name="ln236">        Assert.NotNull(p.FavoriteBand);</a>
<a name="ln237">        Assert.Equal(&quot;Goldfinger&quot;, p.FavoriteBand.Name);</a>
<a name="ln238">    }</a>
<a name="ln239"> </a>
<a name="ln240">    [Fact]</a>
<a name="ln241">    public void Can_Deserialize_Elements_On_Default_Root() {</a>
<a name="ln242">        var doc      = CreateElementsXml();</a>
<a name="ln243">        var response = new RestResponse { Content = doc };</a>
<a name="ln244">        var d        = new XmlAttributeDeserializer();</a>
<a name="ln245">        var p        = d.Deserialize&lt;PersonForXml&gt;(response);</a>
<a name="ln246"> </a>
<a name="ln247">        Assert.Equal(&quot;John Sheehan&quot;, p.Name);</a>
<a name="ln248">        Assert.Equal(new DateTime(2009, 9, 25, 0, 6, 1), p.StartDate);</a>
<a name="ln249">        Assert.Equal(28, p.Age);</a>
<a name="ln250">        Assert.Equal(long.MaxValue, p.BigNumber);</a>
<a name="ln251">        Assert.Equal(99.9999m, p.Percent);</a>
<a name="ln252">        Assert.False(p.IsCool);</a>
<a name="ln253">        Assert.Equal(new Guid(GuidString), p.UniqueId);</a>
<a name="ln254">        Assert.Equal(Guid.Empty, p.EmptyGuid);</a>
<a name="ln255">        Assert.Equal(new Uri(&quot;http://example.com&quot;, UriKind.RelativeOrAbsolute), p.Url);</a>
<a name="ln256">        Assert.Equal(new Uri(&quot;/foo/bar&quot;, UriKind.RelativeOrAbsolute), p.UrlPath);</a>
<a name="ln257">        Assert.Equal(Order.Third, p.Order);</a>
<a name="ln258">        Assert.Equal(Disposition.SoSo, p.Disposition);</a>
<a name="ln259">        Assert.NotNull(p.Friends);</a>
<a name="ln260">        Assert.Equal(10, p.Friends.Count);</a>
<a name="ln261">        Assert.NotNull(p.BestFriend);</a>
<a name="ln262">        Assert.Equal(&quot;The Fonz&quot;, p.BestFriend.Name);</a>
<a name="ln263">        Assert.Equal(1952, p.BestFriend.Since);</a>
<a name="ln264">    }</a>
<a name="ln265"> </a>
<a name="ln266">    [Fact]</a>
<a name="ln267">    public void Can_Deserialize_Attributes_On_Default_Root() {</a>
<a name="ln268">        var doc      = CreateAttributesXml();</a>
<a name="ln269">        var response = new RestResponse { Content = doc };</a>
<a name="ln270">        var d        = new XmlAttributeDeserializer();</a>
<a name="ln271">        var p        = d.Deserialize&lt;PersonForXml&gt;(response);</a>
<a name="ln272"> </a>
<a name="ln273">        Assert.Equal(&quot;John Sheehan&quot;, p.Name);</a>
<a name="ln274">        Assert.Equal(new DateTime(2009, 9, 25, 0, 6, 1), p.StartDate);</a>
<a name="ln275">        Assert.Equal(28, p.Age);</a>
<a name="ln276">        Assert.Equal(long.MaxValue, p.BigNumber);</a>
<a name="ln277">        Assert.Equal(99.9999m, p.Percent);</a>
<a name="ln278">        Assert.False(p.IsCool);</a>
<a name="ln279">        Assert.Equal(new Guid(GuidString), p.UniqueId);</a>
<a name="ln280">        Assert.Equal(new Uri(&quot;http://example.com&quot;, UriKind.RelativeOrAbsolute), p.Url);</a>
<a name="ln281">        Assert.Equal(new Uri(&quot;/foo/bar&quot;, UriKind.RelativeOrAbsolute), p.UrlPath);</a>
<a name="ln282">        Assert.NotNull(p.BestFriend);</a>
<a name="ln283">        Assert.Equal(&quot;The Fonz&quot;, p.BestFriend.Name);</a>
<a name="ln284">        Assert.Equal(1952, p.BestFriend.Since);</a>
<a name="ln285">    }</a>
<a name="ln286"> </a>
<a name="ln287">    [Fact]</a>
<a name="ln288">    public void Ignore_Protected_Property_That_Exists_In_Data() {</a>
<a name="ln289">        var doc      = CreateElementsXml();</a>
<a name="ln290">        var response = new RestResponse { Content = doc };</a>
<a name="ln291">        var d        = new XmlAttributeDeserializer();</a>
<a name="ln292">        var p        = d.Deserialize&lt;PersonForXml&gt;(response);</a>
<a name="ln293"> </a>
<a name="ln294">        Assert.Null(p.IgnoreProxy);</a>
<a name="ln295">    }</a>
<a name="ln296"> </a>
<a name="ln297">    [Fact]</a>
<a name="ln298">    public void Ignore_ReadOnly_Property_That_Exists_In_Data() {</a>
<a name="ln299">        var doc      = CreateElementsXml();</a>
<a name="ln300">        var response = new RestResponse { Content = doc };</a>
<a name="ln301">        var d        = new XmlAttributeDeserializer();</a>
<a name="ln302">        var p        = d.Deserialize&lt;PersonForXml&gt;(response);</a>
<a name="ln303"> </a>
<a name="ln304">        Assert.Null(p.ReadOnlyProxy);</a>
<a name="ln305">    }</a>
<a name="ln306"> </a>
<a name="ln307">    [Fact]</a>
<a name="ln308">    public void Can_Deserialize_Names_With_Underscores_On_Default_Root() {</a>
<a name="ln309">        var doc      = CreateUnderscoresXml();</a>
<a name="ln310">        var response = new RestResponse { Content = doc };</a>
<a name="ln311">        var d        = new XmlAttributeDeserializer();</a>
<a name="ln312">        var p        = d.Deserialize&lt;PersonForXml&gt;(response);</a>
<a name="ln313"> </a>
<a name="ln314">        Assert.Equal(&quot;John Sheehan&quot;, p.Name);</a>
<a name="ln315">        Assert.Equal(new DateTime(2009, 9, 25, 0, 6, 1), p.StartDate);</a>
<a name="ln316">        Assert.Equal(28, p.Age);</a>
<a name="ln317">        Assert.Equal(long.MaxValue, p.BigNumber);</a>
<a name="ln318">        Assert.Equal(99.9999m, p.Percent);</a>
<a name="ln319">        Assert.False(p.IsCool);</a>
<a name="ln320">        Assert.Equal(new Guid(GuidString), p.UniqueId);</a>
<a name="ln321">        Assert.Equal(new Uri(&quot;http://example.com&quot;, UriKind.RelativeOrAbsolute), p.Url);</a>
<a name="ln322">        Assert.Equal(new Uri(&quot;/foo/bar&quot;, UriKind.RelativeOrAbsolute), p.UrlPath);</a>
<a name="ln323">        Assert.NotNull(p.Friends);</a>
<a name="ln324">        Assert.Equal(10, p.Friends.Count);</a>
<a name="ln325">        Assert.NotNull(p.BestFriend);</a>
<a name="ln326">        Assert.Equal(&quot;The Fonz&quot;, p.BestFriend.Name);</a>
<a name="ln327">        Assert.Equal(1952, p.BestFriend.Since);</a>
<a name="ln328">        Assert.NotNull(p.Foes);</a>
<a name="ln329">        Assert.Equal(5, p.Foes.Count);</a>
<a name="ln330">        Assert.Equal(&quot;Yankees&quot;, p.Foes.Team);</a>
<a name="ln331">    }</a>
<a name="ln332"> </a>
<a name="ln333">    [Fact]</a>
<a name="ln334">    public void Can_Deserialize_Names_With_Dashes_On_Default_Root() {</a>
<a name="ln335">        var doc      = CreateDashesXml();</a>
<a name="ln336">        var response = new RestResponse { Content = doc };</a>
<a name="ln337">        var d        = new XmlAttributeDeserializer();</a>
<a name="ln338">        var p        = d.Deserialize&lt;PersonForXml&gt;(response);</a>
<a name="ln339"> </a>
<a name="ln340">        Assert.Equal(&quot;John Sheehan&quot;, p.Name);</a>
<a name="ln341">        Assert.Equal(new DateTime(2009, 9, 25, 0, 6, 1), p.StartDate);</a>
<a name="ln342">        Assert.Equal(28, p.Age);</a>
<a name="ln343">        Assert.Equal(long.MaxValue, p.BigNumber);</a>
<a name="ln344">        Assert.Equal(99.9999m, p.Percent);</a>
<a name="ln345">        Assert.False(p.IsCool);</a>
<a name="ln346">        Assert.Equal(new Guid(GuidString), p.UniqueId);</a>
<a name="ln347">        Assert.Equal(new Uri(&quot;http://example.com&quot;, UriKind.RelativeOrAbsolute), p.Url);</a>
<a name="ln348">        Assert.Equal(new Uri(&quot;/foo/bar&quot;, UriKind.RelativeOrAbsolute), p.UrlPath);</a>
<a name="ln349">        Assert.NotNull(p.Friends);</a>
<a name="ln350">        Assert.Equal(10, p.Friends.Count);</a>
<a name="ln351">        Assert.NotNull(p.BestFriend);</a>
<a name="ln352">        Assert.Equal(&quot;The Fonz&quot;, p.BestFriend.Name);</a>
<a name="ln353">        Assert.Equal(1952, p.BestFriend.Since);</a>
<a name="ln354">        Assert.NotNull(p.Foes);</a>
<a name="ln355">        Assert.Equal(5, p.Foes.Count);</a>
<a name="ln356">        Assert.Equal(&quot;Yankees&quot;, p.Foes.Team);</a>
<a name="ln357">    }</a>
<a name="ln358"> </a>
<a name="ln359">    [Fact]</a>
<a name="ln360">    public void Can_Deserialize_Names_With_Underscores_Without_Matching_Case_On_Default_Root() {</a>
<a name="ln361">        var doc      = CreateLowercaseUnderscoresXml();</a>
<a name="ln362">        var response = new RestResponse { Content = doc };</a>
<a name="ln363">        var d        = new XmlAttributeDeserializer();</a>
<a name="ln364">        var p        = d.Deserialize&lt;PersonForXml&gt;(response);</a>
<a name="ln365"> </a>
<a name="ln366">        Assert.Equal(&quot;John Sheehan&quot;, p.Name);</a>
<a name="ln367">        Assert.Equal(new DateTime(2009, 9, 25, 0, 6, 1), p.StartDate);</a>
<a name="ln368">        Assert.Equal(28, p.Age);</a>
<a name="ln369">        Assert.Equal(long.MaxValue, p.BigNumber);</a>
<a name="ln370">        Assert.Equal(99.9999m, p.Percent);</a>
<a name="ln371">        Assert.False(p.IsCool);</a>
<a name="ln372">        Assert.Equal(new Guid(GuidString), p.UniqueId);</a>
<a name="ln373">        Assert.Equal(new Uri(&quot;http://example.com&quot;, UriKind.RelativeOrAbsolute), p.Url);</a>
<a name="ln374">        Assert.Equal(new Uri(&quot;/foo/bar&quot;, UriKind.RelativeOrAbsolute), p.UrlPath);</a>
<a name="ln375">        Assert.NotNull(p.Friends);</a>
<a name="ln376">        Assert.Equal(10, p.Friends.Count);</a>
<a name="ln377">        Assert.NotNull(p.BestFriend);</a>
<a name="ln378">        Assert.Equal(&quot;The Fonz&quot;, p.BestFriend.Name);</a>
<a name="ln379">        Assert.Equal(1952, p.BestFriend.Since);</a>
<a name="ln380">        Assert.NotNull(p.Foes);</a>
<a name="ln381">        Assert.Equal(5, p.Foes.Count);</a>
<a name="ln382">        Assert.Equal(&quot;Yankees&quot;, p.Foes.Team);</a>
<a name="ln383">    }</a>
<a name="ln384"> </a>
<a name="ln385">    [Fact]</a>
<a name="ln386">    public void Can_Deserialize_Lower_Cased_Root_Elements_With_Dashes() {</a>
<a name="ln387">        var doc      = CreateDashesXml();</a>
<a name="ln388">        var response = new RestResponse { Content = doc };</a>
<a name="ln389">        var d        = new XmlAttributeDeserializer();</a>
<a name="ln390">        var p        = d.Deserialize&lt;PersonForXml&gt;(response);</a>
<a name="ln391"> </a>
<a name="ln392">        Assert.Equal(&quot;John Sheehan&quot;, p.Name);</a>
<a name="ln393">        Assert.Equal(new DateTime(2009, 9, 25, 0, 6, 1), p.StartDate);</a>
<a name="ln394">        Assert.Equal(28, p.Age);</a>
<a name="ln395">        Assert.Equal(long.MaxValue, p.BigNumber);</a>
<a name="ln396">        Assert.Equal(99.9999m, p.Percent);</a>
<a name="ln397">        Assert.False(p.IsCool);</a>
<a name="ln398">        Assert.Equal(new Guid(GuidString), p.UniqueId);</a>
<a name="ln399">        Assert.Equal(new Uri(&quot;http://example.com&quot;, UriKind.RelativeOrAbsolute), p.Url);</a>
<a name="ln400">        Assert.Equal(new Uri(&quot;/foo/bar&quot;, UriKind.RelativeOrAbsolute), p.UrlPath);</a>
<a name="ln401">        Assert.NotNull(p.Friends);</a>
<a name="ln402">        Assert.Equal(10, p.Friends.Count);</a>
<a name="ln403">        Assert.NotNull(p.BestFriend);</a>
<a name="ln404">        Assert.Equal(&quot;The Fonz&quot;, p.BestFriend.Name);</a>
<a name="ln405">        Assert.Equal(1952, p.BestFriend.Since);</a>
<a name="ln406">        Assert.NotNull(p.Foes);</a>
<a name="ln407">        Assert.Equal(5, p.Foes.Count);</a>
<a name="ln408">        Assert.Equal(&quot;Yankees&quot;, p.Foes.Team);</a>
<a name="ln409">    }</a>
<a name="ln410"> </a>
<a name="ln411">    [Fact]</a>
<a name="ln412">    public void Can_Deserialize_Root_Elements_Without_Matching_Case_And_Dashes() {</a>
<a name="ln413">        var doc      = CreateLowerCasedRootElementWithDashesXml();</a>
<a name="ln414">        var response = new RestResponse { Content = doc };</a>
<a name="ln415">        var d        = new XmlAttributeDeserializer();</a>
<a name="ln416">        var p        = d.Deserialize&lt;List&lt;IncomingInvoice&gt;&gt;(response);</a>
<a name="ln417"> </a>
<a name="ln418">        Assert.NotNull(p);</a>
<a name="ln419">        Assert.Single(p);</a>
<a name="ln420">        Assert.Equal(45, p[0].ConceptId);</a>
<a name="ln421">    }</a>
<a name="ln422"> </a>
<a name="ln423">    [Fact]</a>
<a name="ln424">    public void Can_Deserialize_Eventful_Xml() {</a>
<a name="ln425">        var xmlFilePath = PathFor(&quot;eventful.xml&quot;);</a>
<a name="ln426">        var doc         = XDocument.Load(xmlFilePath);</a>
<a name="ln427">        var response    = new RestResponse { Content = doc.ToString() };</a>
<a name="ln428">        var d           = new XmlAttributeDeserializer();</a>
<a name="ln429">        var output      = d.Deserialize&lt;VenueSearch&gt;(response)!;</a>
<a name="ln430"> </a>
<a name="ln431">        Assert.Equal(3, output.venues.Count);</a>
<a name="ln432">        Assert.Equal(&quot;Tivoli&quot;, output.venues[0].name);</a>
<a name="ln433">        Assert.Equal(&quot;https://eventful.com/brisbane/venues/tivoli-/V0-001-002169294-8&quot;, output.venues[1].url);</a>
<a name="ln434">        Assert.Equal(&quot;V0-001-000266914-3&quot;, output.venues[2].id);</a>
<a name="ln435">    }</a>
<a name="ln436"> </a>
<a name="ln437">    [Fact]</a>
<a name="ln438">    public void Can_Deserialize_Lastfm_Xml() {</a>
<a name="ln439">        var xmlFilePath = PathFor(&quot;Lastfm.xml&quot;);</a>
<a name="ln440">        var doc         = XDocument.Load(xmlFilePath);</a>
<a name="ln441">        var response    = new RestResponse { Content = doc.ToString() };</a>
<a name="ln442">        var d           = new XmlAttributeDeserializer();</a>
<a name="ln443">        var output      = d.Deserialize&lt;Event&gt;(response)!;</a>
<a name="ln444"> </a>
<a name="ln445">        Assert.Equal(&quot;https://www.last.fm/event/328799+Philip+Glass+at+Barbican+Centre+on+12+June+2008&quot;, output.url);</a>
<a name="ln446">        Assert.Equal(&quot;https://www.last.fm/venue/8777860+Barbican+Centre&quot;, output.venue.url);</a>
<a name="ln447">    }</a>
<a name="ln448"> </a>
<a name="ln449">    [Fact]</a>
<a name="ln450">    public void Can_Deserialize_Google_Weather_Xml() {</a>
<a name="ln451">        var xmlFilePath = PathFor(&quot;GoogleWeather.xml&quot;);</a>
<a name="ln452">        var doc         = XDocument.Load(xmlFilePath);</a>
<a name="ln453">        var response    = new RestResponse { Content = doc.ToString() };</a>
<a name="ln454">        var d           = new XmlAttributeDeserializer();</a>
<a name="ln455">        var output      = d.Deserialize&lt;xml_api_reply&gt;(response)!;</a>
<a name="ln456"> </a>
<a name="ln457">        Assert.Equal(4, output.weather.Count);</a>
<a name="ln458">        Assert.Equal(&quot;Sunny&quot;, output.weather[0].condition.data);</a>
<a name="ln459">    }</a>
<a name="ln460"> </a>
<a name="ln461">    [Fact]</a>
<a name="ln462">    public void Can_Deserialize_Google_Weather_Xml_WithDeserializeAs() {</a>
<a name="ln463">        var xmlFilePath = PathFor(&quot;GoogleWeather.xml&quot;);</a>
<a name="ln464">        var doc         = XDocument.Load(xmlFilePath);</a>
<a name="ln465">        var response    = new RestResponse { Content = doc.ToString() };</a>
<a name="ln466">        var d           = new XmlAttributeDeserializer();</a>
<a name="ln467">        var output      = d.Deserialize&lt;GoogleWeatherApi&gt;(response)!;</a>
<a name="ln468"> </a>
<a name="ln469">        Assert.Equal(4, output.Weather.Count);</a>
<a name="ln470">        Assert.Equal(&quot;Sunny&quot;, output.Weather[0].Condition.Data);</a>
<a name="ln471">    }</a>
<a name="ln472"> </a>
<a name="ln473">    [Fact]</a>
<a name="ln474">    public void Can_Deserialize_Boolean_From_Number() {</a>
<a name="ln475">        var xmlFilePath = PathFor(&quot;boolean_from_number.xml&quot;);</a>
<a name="ln476">        var doc         = XDocument.Load(xmlFilePath);</a>
<a name="ln477">        var response    = new RestResponse { Content = doc.ToString() };</a>
<a name="ln478">        var d           = new XmlAttributeDeserializer();</a>
<a name="ln479">        var output      = d.Deserialize&lt;BooleanTest&gt;(response)!;</a>
<a name="ln480"> </a>
<a name="ln481">        Assert.True(output.Value);</a>
<a name="ln482">    }</a>
<a name="ln483"> </a>
<a name="ln484">    [Fact]</a>
<a name="ln485">    public void Can_Deserialize_Boolean_From_String() {</a>
<a name="ln486">        var xmlFilePath = PathFor(&quot;boolean_from_string.xml&quot;);</a>
<a name="ln487">        var doc         = XDocument.Load(xmlFilePath);</a>
<a name="ln488">        var response    = new RestResponse { Content = doc.ToString() };</a>
<a name="ln489">        var d           = new XmlAttributeDeserializer();</a>
<a name="ln490">        var output      = d.Deserialize&lt;BooleanTest&gt;(response)!;</a>
<a name="ln491"> </a>
<a name="ln492">        Assert.True(output.Value);</a>
<a name="ln493">    }</a>
<a name="ln494"> </a>
<a name="ln495">    [Fact]</a>
<a name="ln496">    public void Can_Deserialize_Empty_Elements_With_Attributes_to_Nullable_Values() {</a>
<a name="ln497">        var doc    = CreateXmlWithAttributesAndNullValues();</a>
<a name="ln498">        var xml    = new XmlAttributeDeserializer();</a>
<a name="ln499">        var output = xml.Deserialize&lt;NullableValues&gt;(new RestResponse { Content = doc })!;</a>
<a name="ln500"> </a>
<a name="ln501">        Assert.Null(output.Id);</a>
<a name="ln502">        Assert.Null(output.StartDate);</a>
<a name="ln503">        Assert.Null(output.UniqueId);</a>
<a name="ln504">    }</a>
<a name="ln505"> </a>
<a name="ln506">    [Fact]</a>
<a name="ln507">    public void Can_Deserialize_Mixture_Of_Empty_Elements_With_Attributes_And_Populated_Elements() {</a>
<a name="ln508">        var doc    = CreateXmlWithAttributesAndNullValuesAndPopulatedValues();</a>
<a name="ln509">        var xml    = new XmlAttributeDeserializer();</a>
<a name="ln510">        var output = xml.Deserialize&lt;NullableValues&gt;(new RestResponse { Content = doc })!;</a>
<a name="ln511"> </a>
<a name="ln512">        Assert.Null(output.Id);</a>
<a name="ln513">        Assert.Null(output.StartDate);</a>
<a name="ln514">        Assert.Equal(new Guid(GuidString), output.UniqueId);</a>
<a name="ln515">    }</a>
<a name="ln516"> </a>
<a name="ln517">    [Fact]</a>
<a name="ln518">    public void Can_Deserialize_DateTimeOffset() {</a>
<a name="ln519">        var culture = CultureInfo.InvariantCulture;</a>
<a name="ln520">        var doc     = new XDocument(culture);</a>
<a name="ln521"> </a>
<a name="ln522">        var dateTimeOffset = new DateTimeOffset(2013, 02, 08, 9, 18, 22, TimeSpan.FromHours(10));</a>
<a name="ln523"> </a>
<a name="ln524">        DateTimeOffset? nullableDateTimeOffsetWithValue =</a>
<a name="ln525">            new DateTimeOffset(2013, 02, 08, 9, 18, 23, TimeSpan.FromHours(10));</a>
<a name="ln526"> </a>
<a name="ln527">        var root = new XElement(&quot;Dates&quot;);</a>
<a name="ln528"> </a>
<a name="ln529">        root.Add(new XElement(&quot;DateTimeOffset&quot;, dateTimeOffset));</a>
<a name="ln530">        root.Add(new XElement(&quot;NullableDateTimeOffsetWithNull&quot;, string.Empty));</a>
<a name="ln531">        root.Add(new XElement(&quot;NullableDateTimeOffsetWithValue&quot;, nullableDateTimeOffsetWithValue));</a>
<a name="ln532"> </a>
<a name="ln533">        doc.Add(root);</a>
<a name="ln534"> </a>
<a name="ln535">        //var xml = new XmlAttributeDeserializer { Culture = culture };</a>
<a name="ln536">        var response = new RestResponse { Content             = doc.ToString() };</a>
<a name="ln537">        var d        = new XmlAttributeDeserializer { Culture = culture };</a>
<a name="ln538">        var payload  = d.Deserialize&lt;DateTimeTestStructure&gt;(response)!;</a>
<a name="ln539"> </a>
<a name="ln540">        Assert.Equal(dateTimeOffset, payload.DateTimeOffset);</a>
<a name="ln541">        Assert.Null(payload.NullableDateTimeOffsetWithNull);</a>
<a name="ln542">        Assert.True(payload.NullableDateTimeOffsetWithValue.HasValue);</a>
<a name="ln543">        Assert.Equal(nullableDateTimeOffsetWithValue, payload.NullableDateTimeOffsetWithValue);</a>
<a name="ln544">    }</a>
<a name="ln545"> </a>
<a name="ln546">    static string CreateUnderscoresXml() {</a>
<a name="ln547">        var doc  = new XDocument();</a>
<a name="ln548">        var root = new XElement(&quot;Person&quot;);</a>
<a name="ln549"> </a>
<a name="ln550">        root.Add(new XElement(&quot;Name&quot;, &quot;John Sheehan&quot;));</a>
<a name="ln551">        root.Add(new XElement(&quot;Start_Date&quot;, new DateTime(2009, 9, 25, 0, 6, 1)));</a>
<a name="ln552">        root.Add(new XAttribute(&quot;Age&quot;, 28));</a>
<a name="ln553">        root.Add(new XElement(&quot;Percent&quot;, 99.9999m));</a>
<a name="ln554">        root.Add(new XElement(&quot;Big_Number&quot;, long.MaxValue));</a>
<a name="ln555">        root.Add(new XAttribute(&quot;Is_Cool&quot;, false));</a>
<a name="ln556">        root.Add(new XElement(&quot;Ignore&quot;, &quot;dummy&quot;));</a>
<a name="ln557">        root.Add(new XAttribute(&quot;Read_Only&quot;, &quot;dummy&quot;));</a>
<a name="ln558">        root.Add(new XElement(&quot;Unique_Id&quot;, new Guid(GuidString)));</a>
<a name="ln559">        root.Add(new XElement(&quot;Url&quot;, &quot;http://example.com&quot;));</a>
<a name="ln560">        root.Add(new XElement(&quot;Url_Path&quot;, &quot;/foo/bar&quot;));</a>
<a name="ln561"> </a>
<a name="ln562">        root.Add(</a>
<a name="ln563">            new XElement(</a>
<a name="ln564">                &quot;Best_Friend&quot;,</a>
<a name="ln565">                new XElement(&quot;Name&quot;, &quot;The Fonz&quot;),</a>
<a name="ln566">                new XAttribute(&quot;Since&quot;, 1952)</a>
<a name="ln567">            )</a>
<a name="ln568">        );</a>
<a name="ln569"> </a>
<a name="ln570">        var friends = new XElement(&quot;Friends&quot;);</a>
<a name="ln571"> </a>
<a name="ln572">        for (var i = 0; i &lt; 10; i++) {</a>
<a name="ln573">            friends.Add(</a>
<a name="ln574">                new XElement(</a>
<a name="ln575">                    &quot;Friend&quot;,</a>
<a name="ln576">                    new XElement(&quot;Name&quot;, &quot;Friend&quot; + i),</a>
<a name="ln577">                    new XAttribute(&quot;Since&quot;, DateTime.Now.Year - i)</a>
<a name="ln578">                )</a>
<a name="ln579">            );</a>
<a name="ln580">        }</a>
<a name="ln581"> </a>
<a name="ln582">        root.Add(friends);</a>
<a name="ln583"> </a>
<a name="ln584">        var foes = new XElement(&quot;Foes&quot;);</a>
<a name="ln585"> </a>
<a name="ln586">        foes.Add(new XAttribute(&quot;Team&quot;, &quot;Yankees&quot;));</a>
<a name="ln587"> </a>
<a name="ln588">        for (var i = 0; i &lt; 5; i++) foes.Add(new XElement(&quot;Foe&quot;, new XElement(&quot;Nickname&quot;, &quot;Foe&quot; + i)));</a>
<a name="ln589"> </a>
<a name="ln590">        root.Add(foes);</a>
<a name="ln591">        doc.Add(root);</a>
<a name="ln592"> </a>
<a name="ln593">        return doc.ToString();</a>
<a name="ln594">    }</a>
<a name="ln595"> </a>
<a name="ln596">    static string CreateLowercaseUnderscoresXml() {</a>
<a name="ln597">        var doc  = new XDocument();</a>
<a name="ln598">        var root = new XElement(&quot;Person&quot;);</a>
<a name="ln599"> </a>
<a name="ln600">        root.Add(new XElement(&quot;Name&quot;, &quot;John Sheehan&quot;));</a>
<a name="ln601">        root.Add(new XElement(&quot;start_date&quot;, new DateTime(2009, 9, 25, 0, 6, 1)));</a>
<a name="ln602">        root.Add(new XAttribute(&quot;Age&quot;, 28));</a>
<a name="ln603">        root.Add(new XElement(&quot;Percent&quot;, 99.9999m));</a>
<a name="ln604">        root.Add(new XElement(&quot;big_number&quot;, long.MaxValue));</a>
<a name="ln605">        root.Add(new XAttribute(&quot;is_cool&quot;, false));</a>
<a name="ln606">        root.Add(new XElement(&quot;Ignore&quot;, &quot;dummy&quot;));</a>
<a name="ln607">        root.Add(new XAttribute(&quot;read_only&quot;, &quot;dummy&quot;));</a>
<a name="ln608">        root.Add(new XElement(&quot;unique_id&quot;, new Guid(GuidString)));</a>
<a name="ln609">        root.Add(new XElement(&quot;Url&quot;, &quot;http://example.com&quot;));</a>
<a name="ln610">        root.Add(new XElement(&quot;url_path&quot;, &quot;/foo/bar&quot;));</a>
<a name="ln611"> </a>
<a name="ln612">        root.Add(</a>
<a name="ln613">            new XElement(</a>
<a name="ln614">                &quot;best_friend&quot;,</a>
<a name="ln615">                new XElement(&quot;name&quot;, &quot;The Fonz&quot;),</a>
<a name="ln616">                new XAttribute(&quot;Since&quot;, 1952)</a>
<a name="ln617">            )</a>
<a name="ln618">        );</a>
<a name="ln619"> </a>
<a name="ln620">        var friends = new XElement(&quot;Friends&quot;);</a>
<a name="ln621"> </a>
<a name="ln622">        for (var i = 0; i &lt; 10; i++) {</a>
<a name="ln623">            friends.Add(</a>
<a name="ln624">                new XElement(</a>
<a name="ln625">                    &quot;Friend&quot;,</a>
<a name="ln626">                    new XElement(&quot;Name&quot;, &quot;Friend&quot; + i),</a>
<a name="ln627">                    new XAttribute(&quot;Since&quot;, DateTime.Now.Year - i)</a>
<a name="ln628">                )</a>
<a name="ln629">            );</a>
<a name="ln630">        }</a>
<a name="ln631"> </a>
<a name="ln632">        root.Add(friends);</a>
<a name="ln633"> </a>
<a name="ln634">        var foes = new XElement(&quot;Foes&quot;);</a>
<a name="ln635"> </a>
<a name="ln636">        foes.Add(new XAttribute(&quot;Team&quot;, &quot;Yankees&quot;));</a>
<a name="ln637"> </a>
<a name="ln638">        for (var i = 0; i &lt; 5; i++) foes.Add(new XElement(&quot;Foe&quot;, new XElement(&quot;Nickname&quot;, &quot;Foe&quot; + i)));</a>
<a name="ln639"> </a>
<a name="ln640">        root.Add(foes);</a>
<a name="ln641">        doc.Add(root);</a>
<a name="ln642"> </a>
<a name="ln643">        return doc.ToString();</a>
<a name="ln644">    }</a>
<a name="ln645"> </a>
<a name="ln646">    static string CreateDashesXml() {</a>
<a name="ln647">        var doc  = new XDocument();</a>
<a name="ln648">        var root = new XElement(&quot;Person&quot;);</a>
<a name="ln649"> </a>
<a name="ln650">        root.Add(new XElement(&quot;Name&quot;, &quot;John Sheehan&quot;));</a>
<a name="ln651">        root.Add(new XElement(&quot;Start_Date&quot;, new DateTime(2009, 9, 25, 0, 6, 1)));</a>
<a name="ln652">        root.Add(new XAttribute(&quot;Age&quot;, 28));</a>
<a name="ln653">        root.Add(new XElement(&quot;Percent&quot;, 99.9999m));</a>
<a name="ln654">        root.Add(new XElement(&quot;Big-Number&quot;, long.MaxValue));</a>
<a name="ln655">        root.Add(new XAttribute(&quot;Is-Cool&quot;, false));</a>
<a name="ln656">        root.Add(new XElement(&quot;Ignore&quot;, &quot;dummy&quot;));</a>
<a name="ln657">        root.Add(new XAttribute(&quot;Read-Only&quot;, &quot;dummy&quot;));</a>
<a name="ln658">        root.Add(new XElement(&quot;Unique-Id&quot;, new Guid(GuidString)));</a>
<a name="ln659">        root.Add(new XElement(&quot;Url&quot;, &quot;http://example.com&quot;));</a>
<a name="ln660">        root.Add(new XElement(&quot;Url-Path&quot;, &quot;/foo/bar&quot;));</a>
<a name="ln661"> </a>
<a name="ln662">        root.Add(</a>
<a name="ln663">            new XElement(</a>
<a name="ln664">                &quot;Best-Friend&quot;,</a>
<a name="ln665">                new XElement(&quot;Name&quot;, &quot;The Fonz&quot;),</a>
<a name="ln666">                new XAttribute(&quot;Since&quot;, 1952)</a>
<a name="ln667">            )</a>
<a name="ln668">        );</a>
<a name="ln669"> </a>
<a name="ln670">        var friends = new XElement(&quot;Friends&quot;);</a>
<a name="ln671"> </a>
<a name="ln672">        for (var i = 0; i &lt; 10; i++) {</a>
<a name="ln673">            friends.Add(</a>
<a name="ln674">                new XElement(</a>
<a name="ln675">                    &quot;Friend&quot;,</a>
<a name="ln676">                    new XElement(&quot;Name&quot;, &quot;Friend&quot; + i),</a>
<a name="ln677">                    new XAttribute(&quot;Since&quot;, DateTime.Now.Year - i)</a>
<a name="ln678">                )</a>
<a name="ln679">            );</a>
<a name="ln680">        }</a>
<a name="ln681"> </a>
<a name="ln682">        root.Add(friends);</a>
<a name="ln683"> </a>
<a name="ln684">        var foes = new XElement(&quot;Foes&quot;);</a>
<a name="ln685"> </a>
<a name="ln686">        foes.Add(new XAttribute(&quot;Team&quot;, &quot;Yankees&quot;));</a>
<a name="ln687"> </a>
<a name="ln688">        for (var i = 0; i &lt; 5; i++) foes.Add(new XElement(&quot;Foe&quot;, new XElement(&quot;Nickname&quot;, &quot;Foe&quot; + i)));</a>
<a name="ln689"> </a>
<a name="ln690">        root.Add(foes);</a>
<a name="ln691">        doc.Add(root);</a>
<a name="ln692"> </a>
<a name="ln693">        return doc.ToString();</a>
<a name="ln694">    }</a>
<a name="ln695"> </a>
<a name="ln696">    static string CreateLowerCasedRootElementWithDashesXml() {</a>
<a name="ln697">        var doc = new XDocument();</a>
<a name="ln698"> </a>
<a name="ln699">        var root = new XElement(</a>
<a name="ln700">            &quot;incoming-invoices&quot;,</a>
<a name="ln701">            new XElement(</a>
<a name="ln702">                &quot;incoming-invoice&quot;,</a>
<a name="ln703">                new XElement(&quot;concept-id&quot;, 45)</a>
<a name="ln704">            )</a>
<a name="ln705">        );</a>
<a name="ln706"> </a>
<a name="ln707">        doc.Add(root);</a>
<a name="ln708"> </a>
<a name="ln709">        return doc.ToString();</a>
<a name="ln710">    }</a>
<a name="ln711"> </a>
<a name="ln712">    static string CreateElementsXml() {</a>
<a name="ln713">        var doc  = new XDocument();</a>
<a name="ln714">        var root = new XElement(&quot;Person&quot;);</a>
<a name="ln715"> </a>
<a name="ln716">        root.Add(new XElement(&quot;Name&quot;, &quot;John Sheehan&quot;));</a>
<a name="ln717">        root.Add(new XElement(&quot;StartDate&quot;, new DateTime(2009, 9, 25, 0, 6, 1)));</a>
<a name="ln718">        root.Add(new XElement(&quot;Age&quot;, 28));</a>
<a name="ln719">        root.Add(new XElement(&quot;Percent&quot;, 99.9999m));</a>
<a name="ln720">        root.Add(new XElement(&quot;BigNumber&quot;, long.MaxValue));</a>
<a name="ln721">        root.Add(new XElement(&quot;IsCool&quot;, false));</a>
<a name="ln722">        root.Add(new XElement(&quot;Ignore&quot;, &quot;dummy&quot;));</a>
<a name="ln723">        root.Add(new XElement(&quot;ReadOnly&quot;, &quot;dummy&quot;));</a>
<a name="ln724">        root.Add(new XElement(&quot;UniqueId&quot;, new Guid(GuidString)));</a>
<a name="ln725">        root.Add(new XElement(&quot;EmptyGuid&quot;, &quot;&quot;));</a>
<a name="ln726">        root.Add(new XElement(&quot;Url&quot;, &quot;http://example.com&quot;));</a>
<a name="ln727">        root.Add(new XElement(&quot;UrlPath&quot;, &quot;/foo/bar&quot;));</a>
<a name="ln728">        root.Add(new XElement(&quot;Order&quot;, &quot;third&quot;));</a>
<a name="ln729">        root.Add(new XElement(&quot;Disposition&quot;, &quot;so-so&quot;));</a>
<a name="ln730"> </a>
<a name="ln731">        root.Add(</a>
<a name="ln732">            new XElement(</a>
<a name="ln733">                &quot;BestFriend&quot;,</a>
<a name="ln734">                new XElement(&quot;Name&quot;, &quot;The Fonz&quot;),</a>
<a name="ln735">                new XElement(&quot;Since&quot;, 1952)</a>
<a name="ln736">            )</a>
<a name="ln737">        );</a>
<a name="ln738"> </a>
<a name="ln739">        var friends = new XElement(&quot;Friends&quot;);</a>
<a name="ln740"> </a>
<a name="ln741">        for (var i = 0; i &lt; 10; i++) {</a>
<a name="ln742">            friends.Add(</a>
<a name="ln743">                new XElement(</a>
<a name="ln744">                    &quot;Friend&quot;,</a>
<a name="ln745">                    new XElement(&quot;Name&quot;, &quot;Friend&quot; + i),</a>
<a name="ln746">                    new XElement(&quot;Since&quot;, DateTime.Now.Year - i)</a>
<a name="ln747">                )</a>
<a name="ln748">            );</a>
<a name="ln749">        }</a>
<a name="ln750"> </a>
<a name="ln751">        root.Add(friends);</a>
<a name="ln752"> </a>
<a name="ln753">        root.Add(</a>
<a name="ln754">            new XElement(</a>
<a name="ln755">                &quot;FavoriteBand&quot;,</a>
<a name="ln756">                new XElement(&quot;Name&quot;, &quot;Goldfinger&quot;)</a>
<a name="ln757">            )</a>
<a name="ln758">        );</a>
<a name="ln759"> </a>
<a name="ln760">        doc.Add(root);</a>
<a name="ln761"> </a>
<a name="ln762">        return doc.ToString();</a>
<a name="ln763">    }</a>
<a name="ln764"> </a>
<a name="ln765">    static string CreateAttributesXml() {</a>
<a name="ln766">        var doc  = new XDocument();</a>
<a name="ln767">        var root = new XElement(&quot;Person&quot;);</a>
<a name="ln768"> </a>
<a name="ln769">        root.Add(new XAttribute(&quot;Name&quot;, &quot;John Sheehan&quot;));</a>
<a name="ln770">        root.Add(new XAttribute(&quot;StartDate&quot;, new DateTime(2009, 9, 25, 0, 6, 1)));</a>
<a name="ln771">        root.Add(new XAttribute(&quot;Age&quot;, 28));</a>
<a name="ln772">        root.Add(new XAttribute(&quot;Percent&quot;, 99.9999m));</a>
<a name="ln773">        root.Add(new XAttribute(&quot;BigNumber&quot;, long.MaxValue));</a>
<a name="ln774">        root.Add(new XAttribute(&quot;IsCool&quot;, false));</a>
<a name="ln775">        root.Add(new XAttribute(&quot;Ignore&quot;, &quot;dummy&quot;));</a>
<a name="ln776">        root.Add(new XAttribute(&quot;ReadOnly&quot;, &quot;dummy&quot;));</a>
<a name="ln777">        root.Add(new XAttribute(&quot;UniqueId&quot;, new Guid(GuidString)));</a>
<a name="ln778">        root.Add(new XAttribute(&quot;Url&quot;, &quot;http://example.com&quot;));</a>
<a name="ln779">        root.Add(new XAttribute(&quot;UrlPath&quot;, &quot;/foo/bar&quot;));</a>
<a name="ln780"> </a>
<a name="ln781">        root.Add(</a>
<a name="ln782">            new XElement(</a>
<a name="ln783">                &quot;BestFriend&quot;,</a>
<a name="ln784">                new XAttribute(&quot;Name&quot;, &quot;The Fonz&quot;),</a>
<a name="ln785">                new XAttribute(&quot;Since&quot;, 1952)</a>
<a name="ln786">            )</a>
<a name="ln787">        );</a>
<a name="ln788"> </a>
<a name="ln789">        doc.Add(root);</a>
<a name="ln790"> </a>
<a name="ln791">        return doc.ToString();</a>
<a name="ln792">    }</a>
<a name="ln793"> </a>
<a name="ln794">    static string CreateXmlWithNullValues() {</a>
<a name="ln795">        var doc  = new XDocument();</a>
<a name="ln796">        var root = new XElement(&quot;NullableValues&quot;);</a>
<a name="ln797"> </a>
<a name="ln798">        root.Add(</a>
<a name="ln799">            new XElement(&quot;Id&quot;, null),</a>
<a name="ln800">            new XElement(&quot;StartDate&quot;, null),</a>
<a name="ln801">            new XElement(&quot;UniqueId&quot;, null)</a>
<a name="ln802">        );</a>
<a name="ln803"> </a>
<a name="ln804">        doc.Add(root);</a>
<a name="ln805"> </a>
<a name="ln806">        return doc.ToString();</a>
<a name="ln807">    }</a>
<a name="ln808"> </a>
<a name="ln809">    static string CreateXmlWithoutEmptyValues(CultureInfo culture) {</a>
<a name="ln810">        var doc  = new XDocument();</a>
<a name="ln811">        var root = new XElement(&quot;NullableValues&quot;);</a>
<a name="ln812"> </a>
<a name="ln813">        root.Add(</a>
<a name="ln814">            new XElement(&quot;Id&quot;, 123),</a>
<a name="ln815">            new XElement(&quot;StartDate&quot;, new DateTime(2010, 2, 21, 9, 35, 00).ToString(culture)),</a>
<a name="ln816">            new XElement(&quot;UniqueId&quot;, new Guid(GuidString))</a>
<a name="ln817">        );</a>
<a name="ln818"> </a>
<a name="ln819">        doc.Add(root);</a>
<a name="ln820"> </a>
<a name="ln821">        return doc.ToString();</a>
<a name="ln822">    }</a>
<a name="ln823"> </a>
<a name="ln824">    static string CreateXmlWithEmptyNestedList() {</a>
<a name="ln825">        var doc  = new XDocument();</a>
<a name="ln826">        var root = new XElement(&quot;EmptyListSample&quot;);</a>
<a name="ln827"> </a>
<a name="ln828">        root.Add(new XElement(&quot;Images&quot;));</a>
<a name="ln829">        doc.Add(root);</a>
<a name="ln830"> </a>
<a name="ln831">        return doc.ToString();</a>
<a name="ln832">    }</a>
<a name="ln833"> </a>
<a name="ln834">    static string CreateXmlWithEmptyInlineList() {</a>
<a name="ln835">        var doc  = new XDocument();</a>
<a name="ln836">        var root = new XElement(&quot;EmptyListSample&quot;);</a>
<a name="ln837"> </a>
<a name="ln838">        doc.Add(root);</a>
<a name="ln839"> </a>
<a name="ln840">        return doc.ToString();</a>
<a name="ln841">    }</a>
<a name="ln842"> </a>
<a name="ln843">    static string CreateXmlWithAttributesAndNullValues() {</a>
<a name="ln844">        var doc       = new XDocument();</a>
<a name="ln845">        var root      = new XElement(&quot;NullableValues&quot;);</a>
<a name="ln846">        var idElement = new XElement(&quot;Id&quot;, null);</a>
<a name="ln847"> </a>
<a name="ln848">        idElement.SetAttributeValue(&quot;SomeAttribute&quot;, &quot;SomeAttribute_Value&quot;);</a>
<a name="ln849"> </a>
<a name="ln850">        root.Add(</a>
<a name="ln851">            idElement,</a>
<a name="ln852">            new XElement(&quot;StartDate&quot;, null),</a>
<a name="ln853">            new XElement(&quot;UniqueId&quot;, null)</a>
<a name="ln854">        );</a>
<a name="ln855"> </a>
<a name="ln856">        doc.Add(root);</a>
<a name="ln857"> </a>
<a name="ln858">        return doc.ToString();</a>
<a name="ln859">    }</a>
<a name="ln860"> </a>
<a name="ln861">    static string CreateXmlWithAttributesAndNullValuesAndPopulatedValues() {</a>
<a name="ln862">        var doc       = new XDocument();</a>
<a name="ln863">        var root      = new XElement(&quot;NullableValues&quot;);</a>
<a name="ln864">        var idElement = new XElement(&quot;Id&quot;, null);</a>
<a name="ln865"> </a>
<a name="ln866">        idElement.SetAttributeValue(&quot;SomeAttribute&quot;, &quot;SomeAttribute_Value&quot;);</a>
<a name="ln867"> </a>
<a name="ln868">        root.Add(</a>
<a name="ln869">            idElement,</a>
<a name="ln870">            new XElement(&quot;StartDate&quot;, null),</a>
<a name="ln871">            new XElement(&quot;UniqueId&quot;, new Guid(GuidString))</a>
<a name="ln872">        );</a>
<a name="ln873"> </a>
<a name="ln874">        doc.Add(root);</a>
<a name="ln875"> </a>
<a name="ln876">        return doc.ToString();</a>
<a name="ln877">    }</a>
<a name="ln878">}</a>
</code></pre>
<div class="balloon" rel="334"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v3013/" target="_blank">V3013</a> It is odd that the body of 'Can_Deserialize_Names_With_Dashes_On_Default_Root' function is fully equivalent to the body of 'Can_Deserialize_Lower_Cased_Root_Elements_With_Dashes' function.</p></div>
<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>